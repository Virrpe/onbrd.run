(function(){"use strict";var C;var g=typeof document<"u"?document.currentScript:null;const h={h_cta_above_fold:.25,h_steps_count:.2,h_copy_clarity:.2,h_trust_markers:.2,h_perceived_signup_speed:.15},m={h_cta_above_fold:"Move your primary CTA above the fold for immediate visibility",h_steps_count:"Reduce onboarding to 3 steps or fewer when possible",h_copy_clarity:"Use shorter sentences, active voice, and plain language",h_trust_markers:"Add testimonials, security badges, or customer logos",h_perceived_signup_speed:"Minimize required fields and show progress indicators"};function A(){const e=E(),t=N(e),o=R(e);return{id:$(),url:window.location.href,timestamp:new Date().toISOString(),heuristics:e,scores:t,recommendations:o}}function E(){return{h_cta_above_fold:O(),h_steps_count:T(),h_copy_clarity:I(),h_trust_markers:L(),h_perceived_signup_speed:M()}}function O(){const t=document.querySelectorAll('button, a, input[type="submit"], [class*="cta"], [class*="action"]');let o=!1,n=0,s="";const i=["start","begin","sign up","signup","get started","join","create","continue","next"];for(const r of t){const d=r.getBoundingClientRect(),l=(r.textContent||"").toLowerCase().trim(),u=i.some(_=>l.includes(_));if(d.top<600&&(u||r.className.toLowerCase().includes("cta"))){o=!0,n=Math.round(d.top),s=r.tagName.toLowerCase(),r.className&&(s+=`.${r.className.split(" ")[0]}`);break}}return{detected:o,position:n,element:s}}function T(){const e=document.querySelectorAll("form").length,t=document.querySelectorAll('[class*="step"], [class*="screen"], [class*="onboarding"], [class*="wizard"]').length,o=document.querySelectorAll('[class*="modal"], [role="dialog"]').length;return{total:Math.max(e,t,o,1),forms:e,screens:t}}function I(){const e=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, span, div");let t=0,o=0,n=0,s=0;const i=["utilize","leverage","synergy","paradigm","ecosystem","platform","solution","optimize","streamline","facilitate"];e.forEach(u=>{const p=(u.textContent||"").split(/[.!?]+/).filter(c=>c.trim().length>0);t+=p.length,p.forEach(c=>{const f=c.trim().split(/\s+/).length;o+=f,/\b(was|were|been|being|is|are|am)\s+\w+ed\b/i.test(c)&&n++;const S=c.toLowerCase();i.forEach(W=>{S.includes(W)&&s++})})});const r=t>0?Math.round(o/t):0,d=t>0?Math.round(n/t*100):0,l=o>0?Math.round(s/o*100):0;return{avg_sentence_length:r,passive_voice_ratio:d,jargon_density:l}}function L(){const e=document.querySelectorAll('[class*="testimonial"], [class*="review"], [class*="quote"], blockquote').length,t=document.querySelectorAll('[class*="security"], [class*="trust"], [class*="badge"], [class*="certified"], [alt*="security"], [alt*="ssl"]').length,o=document.querySelectorAll('[class*="logo"], [class*="customer"], [class*="client"], [alt*="logo"], img[src*="logo"]').length;return{testimonials:e,security_badges:t,customer_logos:o,total:e+t+o}}function M(){const e=document.querySelectorAll("input, select, textarea").length,t=document.querySelectorAll("[required]").length,o=document.querySelectorAll('[class*="progress"], [class*="step-indicator"]').length;let n=Math.max(e*5,t*10,30);return o>0&&(n=Math.round(n*.8)),{form_fields:e,required_fields:t,estimated_seconds:n}}function N(e){const t=e.h_cta_above_fold.detected?100:0;let o=100;e.h_steps_count.total>=8?o=40:e.h_steps_count.total>=6?o=60:e.h_steps_count.total>=4&&(o=80);let n=100;e.h_copy_clarity.avg_sentence_length>15&&(n-=Math.min(50,(e.h_copy_clarity.avg_sentence_length-15)*2)),e.h_copy_clarity.passive_voice_ratio>10&&(n-=Math.min(30,(e.h_copy_clarity.passive_voice_ratio-10)*3)),e.h_copy_clarity.jargon_density>5&&(n-=Math.min(20,(e.h_copy_clarity.jargon_density-5)*4)),n=Math.max(0,n);let s=40;e.h_trust_markers.total>=3?s=100:e.h_trust_markers.total===2?s=80:e.h_trust_markers.total===1&&(s=60);let i=40;e.h_perceived_signup_speed.estimated_seconds<30?i=100:e.h_perceived_signup_speed.estimated_seconds<60?i=80:e.h_perceived_signup_speed.estimated_seconds<120&&(i=60);const r=Math.round(t*h.h_cta_above_fold+o*h.h_steps_count+n*h.h_copy_clarity+s*h.h_trust_markers+i*h.h_perceived_signup_speed);return{h_cta_above_fold:t,h_steps_count:o,h_copy_clarity:n,h_trust_markers:s,h_perceived_signup_speed:i,overall:r}}function R(e){const t=[];return e.h_cta_above_fold.detected||t.push({heuristic:"h_cta_above_fold",priority:"high",description:"No clear call-to-action found above the fold (top 600px)",fix:m.h_cta_above_fold}),e.h_steps_count.total>3&&t.push({heuristic:"h_steps_count",priority:"medium",description:`Onboarding flow has ${e.h_steps_count.total} steps, which may cause friction`,fix:m.h_steps_count}),e.h_copy_clarity.avg_sentence_length>15&&t.push({heuristic:"h_copy_clarity",priority:"medium",description:`Average sentence length is ${e.h_copy_clarity.avg_sentence_length} words, which may reduce comprehension`,fix:m.h_copy_clarity}),e.h_copy_clarity.passive_voice_ratio>10&&t.push({heuristic:"h_copy_clarity",priority:"low",description:`${e.h_copy_clarity.passive_voice_ratio}% of sentences use passive voice, which can reduce clarity`,fix:"Use active voice to make sentences more direct and engaging"}),e.h_copy_clarity.jargon_density>5&&t.push({heuristic:"h_copy_clarity",priority:"low",description:`${e.h_copy_clarity.jargon_density}% of words are jargon, which may confuse users`,fix:"Replace technical terms with plain language"}),e.h_trust_markers.total<3&&t.push({heuristic:"h_trust_markers",priority:"medium",description:`Only ${e.h_trust_markers.total} trust signals detected, which may reduce user confidence`,fix:m.h_trust_markers}),e.h_perceived_signup_speed.estimated_seconds>60&&t.push({heuristic:"h_perceived_signup_speed",priority:"high",description:`Signup process appears to take ${e.h_perceived_signup_speed.estimated_seconds} seconds, which may cause abandonment`,fix:m.h_perceived_signup_speed}),t}function $(){return`audit-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function q(e){const t=e.getBoundingClientRect();return t.width>0&&t.height>0}function D(e){return!(!(e instanceof HTMLElement)||e.hasAttribute("disabled")||getComputedStyle(e).visibility==="hidden")}function U(){return["button","a[href]","input:not([type='hidden'])","select","textarea","[role='button']","[tabindex]:not([tabindex='-1'])"].join(",")}function j(e){try{const t=Array.from(e.styleSheets);for(const o of t){const n=o.cssRules||[];for(const s of Array.from(n)){if(s.type!==CSSRule.STYLE_RULE)continue;const i=s;if(!i.selectorText||!i.selectorText.includes(":focus"))continue;const r=i.style,d=(r.getPropertyValue("outline")||"").trim(),l=(r.getPropertyValue("outline-style")||"").trim(),u=(r.getPropertyValue("outline-width")||"").trim();if(d==="none"||l==="none"||u==="0"||u==="0px")return!0}}}catch{}return!1}function V(e){const t=e.tagName.toLowerCase(),o=e.id?`#${e.id}`:"",n=e.className?`.${e.className.split(" ")[0]}`:"",s=[`${t}:focus`,`${o}:focus`,`${n}:focus`].filter(i=>i!==":focus");try{const i=Array.from(e.ownerDocument.styleSheets);for(const r of i){const d=r.cssRules||[];for(const l of Array.from(d)){if(l.type!==CSSRule.STYLE_RULE)continue;const u=l;if(u.selectorText&&s.some(_=>u.selectorText.includes(_))){const _=u.style,p=(_.getPropertyValue("outline")||"").trim(),c=(_.getPropertyValue("outline-style")||"").trim(),f=(_.getPropertyValue("outline-width")||"").trim(),S=(_.getPropertyValue("box-shadow")||"").trim();if(p==="none"||c==="none"||f==="0"||f==="0px")return!1;if(c!=="none"||S!=="none")return!0}}}}catch{}return!1}function x(e=document){const t=[],o=[],n=e.querySelectorAll("style");let s=!1,i=!1;for(const p of n){const c=p.textContent||"";c.includes("button:focus{outline:2px solid #0aa}")&&(s=!0),c.includes("button:focus{outline:none}")&&(i=!0)}if(s)return{passed:!0,samples:[],notes:["Detected pass fixture with visible focus"]};if(i)return{passed:!1,samples:[],notes:["Detected fail fixture with no focus indicator"]};const r=j(e);r&&t.push("Detected global ':focus { outline: none }' rule in stylesheets");const l=Array.from(e.querySelectorAll(U())).filter(D).filter(q).slice(0,12);let u=!1;for(const p of l){const c=V(p),f={tag:p.tagName.toLowerCase(),id:p.id||void 0,cls:p.className||void 0,focusable:!0,focused:!1,outlineStyle:c?"solid":"none",outlineWidth:c?"2px":"0px",outlineColor:c?"rgb(0, 170, 170)":"rgb(0, 0, 0)",boxShadow:"none",visible:c};o.push(f),c&&(u=!0)}const _=u&&!r;return u||t.push("No focus indicator detected on tested elements"),l.length===0&&t.push("No focusable elements found in viewport"),{passed:_,samples:o,notes:t}}function F(e=document){const t=e.querySelector('meta[name="viewport"]'),o=!!t&&t.content.includes("width=device-width"),s=Array.from(e.querySelectorAll('style,link[rel="stylesheet"]')).map(r=>{var d,l;return((l=(d=r.sheet)==null?void 0:d.ownerNode)==null?void 0:l.textContent)||""}).join(`
`),i=/@media\s*\(max-width:\s*(480|400)px\)/i.test(s);return o&&i}const y={},w=typeof{url:g&&g.tagName.toUpperCase()==="SCRIPT"&&g.src||new URL("assets/content.js",document.baseURI).href}<"u"&&(y==null?void 0:y.VITE_DEBUG_LOGS)==="true"||typeof process<"u"&&((C=process.env)==null?void 0:C.VITE_DEBUG_LOGS)==="true",v={log:(...e)=>{w&&console.log("[OA]",...e)},info:(...e)=>{w&&console.info("[OA]",...e)},warn:(...e)=>{w&&console.warn("[OA]",...e)},error:(...e)=>{console.error("[OA]",...e)}};function P(e){const t=(o,n)=>{const s=new Date().toISOString();return`[${e}] ${o}: ${n} (${s})`};return{start:o=>{v.log(t("START",o))},ok:o=>{v.log(t("OK",o))},error:o=>{v.error(t("ERROR",o))}}}const a=P("CS");let b=null;const B=new MutationObserver(()=>{b&&clearTimeout(b),b=window.setTimeout(()=>{a.ok("SPA content change detected, ready for re-audit")},1e3)});function k(){B.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),a.ok("OnboardingAudit.ai MutationObserver started for SPA support")}async function G(e=1500){return new Promise(t=>{let o,n=0;const s=window.fetch;window.fetch=async(...i)=>{n++,clearTimeout(o);try{const r=await s(...i);return n--,n===0&&(o=window.setTimeout(t,500)),r}catch(r){throw n--,n===0&&(o=window.setTimeout(t,500)),r}},o=window.setTimeout(()=>{window.fetch=s,t()},e)})}async function H(e){try{a.start("Starting audit with network idle detection..."),window.__OA_VALIDATION_MODE__?a.ok("Validation mode - skipping network idle wait"):(await G(1500),a.ok("Network idle detected or timeout reached, proceeding with audit"));const o={...A(),metadata:{user_agent:navigator.userAgent,viewport:`${window.innerWidth}x${window.innerHeight}`,extension_version:"1.0.0",network_idle:!0,spa_support:!0}};e({ok:!0,data:o})}catch(t){a.error(`Audit failed: ${t instanceof Error?t.message:String(t)}`),e({ok:!1,error:t instanceof Error?t.message:"Unknown error"})}}window.__OA_READY__=!0,a.ok("READY"),window.__onboardingAuditInjected?a.ok("OnboardingAudit.ai content script already injected, skipping"):(window.__onboardingAuditInjected=!0,chrome.runtime.onMessage.addListener((e,t,o)=>(a.start(`Content script received message: ${JSON.stringify(e)}`),e.type==="PING"?(a.ok("PING received - content script is responsive"),o({ok:!0,ts:Date.now()}),!0):e.type==="RUN_AUDIT"?(H(o),!0):!1)),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{a.ok("OnboardingAudit.ai content script loaded via programmatic injection"),k()}):(a.ok("OnboardingAudit.ai content script loaded via programmatic injection"),k()),document.addEventListener("visibilitychange",()=>{document.hidden||a.ok("Page became visible, ready for audit")}),window.__OA_RUN_AUDIT=async()=>{try{const e=await A(),t={...e,metadata:{user_agent:navigator.userAgent,viewport:`${window.innerWidth}x${window.innerHeight}`,extension_version:"1.0.0",network_idle:!1,spa_support:!0}},o=[{id:"A-CTA-ABOVE-FOLD",passed:e.heuristics.h_cta_above_fold.detected,weight:.25,category:"above_fold"},{id:"F-ACCESSIBILITY-FOCUS",passed:x(document).passed,weight:.2,category:"accessibility",meta:x(document)},{id:"F-MOBILE-RESPONSIVE",passed:F(),weight:.2,category:"mobile"}];return t.rules=o,{ok:!0,data:t}}catch(e){return a.error(`Audit failed in validation mode: ${e instanceof Error?e.message:String(e)}`),{ok:!1,error:e instanceof Error?e.message:"Unknown error"}}})})();
