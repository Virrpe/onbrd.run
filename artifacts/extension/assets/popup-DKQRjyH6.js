var Z=Object.defineProperty;var tt=(t,e,n)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>tt(t,typeof e!="symbol"?e+"":e,n);function A(){}function Q(t){return t()}function P(){return Object.create(null)}function S(t){t.forEach(Q)}function W(t){return typeof t=="function"}function et(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function nt(t){return Object.keys(t).length===0}function c(t,e){t.appendChild(e)}function X(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode&&t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function O(){return U(" ")}function M(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ot(t){return Array.from(t.childNodes)}function D(t,e){e=""+e,t.data!==e&&(t.data=e)}let j;function v(t){j=t}function rt(){if(!j)throw new Error("Function called outside component initialization");return j}function lt(t){rt().$$.on_mount.push(t)}const E=[],F=[];let L=[];const q=[],ut=Promise.resolve();let I=!1;function it(){I||(I=!0,ut.then(Y))}function V(t){L.push(t)}const B=new Set;let $=0;function Y(){if($!==0)return;const t=j;do{try{for(;$<E.length;){const e=E[$];$++,v(e),st(e.$$)}}catch(e){throw E.length=0,$=0,e}for(v(null),E.length=0,$=0;F.length;)F.pop()();for(let e=0;e<L.length;e+=1){const n=L[e];B.has(n)||(B.add(n),n())}L.length=0}while(E.length);for(;q.length;)q.pop()();I=!1,B.clear(),v(t)}function st(t){if(t.fragment!==null){t.update(),S(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}function ct(t){const e=[],n=[];L.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),L=e}const at=new Set;function dt(t,e){t&&t.i&&(at.delete(t),t.i(e))}function ft(t,e,n){const{fragment:o,after_update:l}=t.$$;o&&o.m(e,n),V(()=>{const u=t.$$.on_mount.map(Q).filter(W);t.$$.on_destroy?t.$$.on_destroy.push(...u):S(u),t.$$.on_mount=[]}),l.forEach(V)}function pt(t,e){const n=t.$$;n.fragment!==null&&(ct(n.after_update),S(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,e){t.$$.dirty[0]===-1&&(E.push(t),it(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function bt(t,e,n,o,l,u,b=null,x=[-1]){const g=j;v(t);const i=t.$$={fragment:null,ctx:[],props:u,update:A,not_equal:l,bound:P(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(g?g.$$.context:[])),callbacks:P(),dirty:x,skip_bound:!1,root:e.target||g.$$.root};b&&b(i.root);let f=!1;if(i.ctx=n?n(t,e.props||{},(d,r,...h)=>{const s=h.length?h[0]:r;return i.ctx&&l(i.ctx[d],i.ctx[d]=s)&&(!i.skip_bound&&i.bound[d]&&i.bound[d](s),f&&ht(t,d)),r}):[],i.update(),f=!0,S(i.before_update),i.fragment=o?o(i.ctx):!1,e.target){if(e.hydrate){const d=ot(e.target);i.fragment&&i.fragment.l(d),d.forEach(z)}else i.fragment&&i.fragment.c();e.intro&&dt(t.$$.fragment),ft(t,e.target,e.anchor),Y()}v(g)}class gt{constructor(){H(this,"$$");H(this,"$$set")}$destroy(){pt(this,1),this.$destroy=A}$on(e,n){if(!W(n))return A;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(e){this.$$set&&!nt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(mt);function G(t){let e,n,o;return{c(){e=w("button"),e.textContent="View Report",y(e,"class","w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors")},m(l,u){X(l,e,u),n||(o=M(e,"click",t[5]),n=!0)},p:A,d(l){l&&z(e),n=!1,o()}}}function _t(t){let e,n,o,l,u,b=t[1]?"Running audit...":"Run Audit",x,g,i,f,d,r,h,s,m,R,k,N,T,C,J,a=t[3]&&G(t);return{c(){e=w("main"),n=w("h1"),n.textContent="OnboardingAudit.ai",o=O(),l=w("div"),u=w("button"),x=U(b),g=O(),a&&a.c(),i=O(),f=w("button"),d=U("Export JSON"),h=O(),s=w("button"),m=U("Export HTML"),k=O(),N=w("div"),T=U(t[0]),y(n,"class","text-xl font-bold text-gray-800 mb-4"),u.disabled=t[1],y(u,"class","w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),f.disabled=r=!t[2],y(f,"class","w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),s.disabled=R=!t[2],y(s,"class","w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),y(l,"class","space-y-3"),y(N,"class","mt-4 text-sm text-gray-600"),y(e,"class","w-80 p-6 bg-white")},m(p,_){X(p,e,_),c(e,n),c(e,o),c(e,l),c(l,u),c(u,x),c(l,g),a&&a.m(l,null),c(l,i),c(l,f),c(f,d),c(l,h),c(l,s),c(s,m),c(e,k),c(e,N),c(N,T),C||(J=[M(u,"click",t[4]),M(f,"click",t[6]),M(s,"click",t[7])],C=!0)},p(p,[_]){_&2&&b!==(b=p[1]?"Running audit...":"Run Audit")&&D(x,b),_&2&&(u.disabled=p[1]),p[3]?a?a.p(p,_):(a=G(p),a.c(),a.m(l,i)):a&&(a.d(1),a=null),_&4&&r!==(r=!p[2])&&(f.disabled=r),_&4&&R!==(R=!p[2])&&(s.disabled=R),_&1&&D(T,p[0])},i:A,o:A,d(p){p&&z(e),a&&a.d(),C=!1,S(J)}}}function K(t){return renderReport(t)}function wt(t,e,n){let o="Ready to audit",l=!1,u=null,b=!1;lt(()=>{console.log("OnboardingAudit.ai popup initialized"),chrome.runtime.onMessage.addListener(r=>{r.action==="audit_result"&&g(r.data)})});async function x(){n(1,l=!0),n(0,o="Running audit...");try{const r=await chrome.runtime.sendMessage({action:"RUN_AUDIT"});if(!(r!=null&&r.success))throw new Error((r==null?void 0:r.error)||"Audit failed")}catch(r){n(0,o=`Error: ${r.message||"Unknown error"}`),n(1,l=!1)}}function g(r){console.log("Audit result received:",r),n(2,u=r),n(0,o=`Audit complete! Score: ${r.scores.overall}/100`),n(1,l=!1),n(3,b=!0)}function i(){if(!u)return;const r=K(u),h=new Blob([r],{type:"text/html"}),s=URL.createObjectURL(h);chrome.tabs.create({url:s})}function f(){if(!u){n(0,o="No audit data to export");return}const r=JSON.stringify(u,null,2),h=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(h),m=document.createElement("a");m.href=s,m.download=`onboarding-audit-${u.id}.json`,m.click(),URL.revokeObjectURL(s),n(0,o="Audit exported successfully")}function d(){if(!u){n(0,o="No audit data to export");return}try{const r=K(u),h=new Blob([r],{type:"text/html"}),s=URL.createObjectURL(h),m=new URL(u.url).hostname.replace(/\./g,"-"),R=new Date(u.timestamp).toISOString().split("T")[0].replace(/-/g,""),k=document.createElement("a");k.href=s,k.download=`onboarding-audit-${m}-${R}.html`,k.click(),URL.revokeObjectURL(s),n(0,o="HTML report exported successfully")}catch(r){n(0,o=`Error exporting HTML: ${r.message}`)}}return[o,l,u,b,x,i,f,d]}class yt extends gt{constructor(e){super(),bt(this,e,wt,_t,et,{})}}const Rt=new yt({target:document.body});export{Rt as default};
