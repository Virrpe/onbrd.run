var J=Object.defineProperty;var K=(e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var j=(e,t,n)=>K(e,typeof t!="symbol"?t+"":t,n);function O(){}function q(e){return e()}function D(){return Object.create(null)}function S(e){e.forEach(q)}function G(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function W(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function X(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function g(e){return document.createTextNode(e)}function A(){return g(" ")}function F(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Y(e){return Array.from(e.childNodes)}function x(e,t){t=""+t,e.data!==t&&(e.data=t)}let N;function C(e){N=e}function Z(){if(!N)throw new Error("Function called outside component initialization");return N}function ee(e){Z().$$.on_mount.push(e)}const v=[],M=[];let E=[];const P=[],te=Promise.resolve();let B=!1;function ne(){B||(B=!0,te.then(H))}function L(e){E.push(e)}const I=new Set;let k=0;function H(){if(k!==0)return;const e=N;do{try{for(;k<v.length;){const t=v[k];k++,C(t),le(t.$$)}}catch(t){throw v.length=0,k=0,t}for(C(null),v.length=0,k=0;M.length;)M.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];I.has(n)||(I.add(n),n())}E.length=0}while(v.length);for(;P.length;)P.pop()();B=!1,I.clear(),C(e)}function le(e){if(e.fragment!==null){e.update(),S(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}function ie(e){const t=[],n=[];E.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),E=t}const ce=new Set;function oe(e,t){e&&e.i&&(ce.delete(e),e.i(t))}function R(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function se(e,t,n){const{fragment:l,after_update:u}=e.$$;l&&l.m(t,n),L(()=>{const a=e.$$.on_mount.map(q).filter(G);e.$$.on_destroy?e.$$.on_destroy.push(...a):S(a),e.$$.on_mount=[]}),u.forEach(L)}function fe(e,t){const n=e.$$;n.fragment!==null&&(ie(n.after_update),S(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function re(e,t){e.$$.dirty[0]===-1&&(v.push(e),ne(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,n,l,u,a,f=null,h=[-1]){const m=N;C(e);const c=e.$$={fragment:null,ctx:[],props:a,update:O,not_equal:u,bound:D(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:D(),dirty:h,skip_bound:!1,root:t.target||m.$$.root};f&&f(c.root);let r=!1;if(c.ctx=n?n(e,t.props||{},(s,o,...i)=>{const d=i.length?i[0]:o;return c.ctx&&u(c.ctx[s],c.ctx[s]=d)&&(!c.skip_bound&&c.bound[s]&&c.bound[s](d),r&&re(e,s)),o}):[],c.update(),r=!0,S(c.before_update),c.fragment=l?l(c.ctx):!1,t.target){if(t.hydrate){const s=Y(t.target);c.fragment&&c.fragment.l(s),s.forEach(w)}else c.fragment&&c.fragment.c();t.intro&&oe(e.$$.fragment),se(e,t.target,t.anchor),H()}C(m)}class ae{constructor(){j(this,"$$");j(this,"$$set")}$destroy(){fe(this,1),this.$destroy=O}$on(t,n){if(!G(n))return O;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const u=l.indexOf(n);u!==-1&&l.splice(u,1)}}$set(t){this.$$set&&!W(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const de="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(de);function U(e,t,n){const l=e.slice();return l[7]=t[n],l}function z(e){let t,n,l,u,a,f,h;function m(i,d){return i[1].percentile?_e:he}let c=m(e),r=c(e),s=R(e[2]),o=[];for(let i=0;i<s.length;i+=1)o[i]=V(U(e,s,i));return{c(){t=b("div"),n=g(e[0]),l=A(),r.c(),u=A(),a=b("div"),a.textContent="Fix these to improve:",f=A(),h=b("ul");for(let i=0;i<o.length;i+=1)o[i].c();y(t,"class","text-4xl font-bold"),y(a,"class","text-sm font-medium"),y(h,"class","space-y-1")},m(i,d){$(i,t,d),p(t,n),$(i,l,d),r.m(i,d),$(i,u,d),$(i,a,d),$(i,f,d),$(i,h,d);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(h,null)},p(i,d){if(d&1&&x(n,i[0]),c===(c=m(i))&&r?r.p(i,d):(r.d(1),r=c(i),r&&(r.c(),r.m(u.parentNode,u))),d&4){s=R(i[2]);let _;for(_=0;_<s.length;_+=1){const T=U(i,s,_);o[_]?o[_].p(T,d):(o[_]=V(T),o[_].c(),o[_].m(h,null))}for(;_<o.length;_+=1)o[_].d(1);o.length=s.length}},d(i){i&&(w(t),w(l),w(u),w(a),w(f),w(h)),r.d(i),X(o,i)}}}function he(e){let t;return{c(){t=b("div"),t.textContent="Benchmark will appear when available",y(t,"class","text-sm opacity-60")},m(n,l){$(n,t,l)},p:O,d(n){n&&w(t)}}}function _e(e){let t,n,l=e[1].percentile+"",u,a,f=e[1].count+"",h,m,c=e[1].median+"",r,s;return{c(){t=b("div"),n=g("Top "),u=g(l),a=g("% of "),h=g(f),m=g(" peers (median "),r=g(c),s=g(")"),y(t,"class","text-sm opacity-80")},m(o,i){$(o,t,i),p(t,n),p(t,u),p(t,a),p(t,h),p(t,m),p(t,r),p(t,s)},p(o,i){i&2&&l!==(l=o[1].percentile+"")&&x(u,l),i&2&&f!==(f=o[1].count+"")&&x(h,f),i&2&&c!==(c=o[1].median+"")&&x(r,c)},d(o){o&&w(t)}}}function V(e){let t,n,l,u=e[7].id+"",a,f,h=e[7].fix+"",m;return{c(){t=b("li"),n=g("❌ "),l=b("span"),a=g(u),f=g(" — "),m=g(h),y(l,"class","font-medium"),y(t,"class","text-sm")},m(c,r){$(c,t,r),p(t,n),p(t,l),p(l,a),p(t,f),p(t,m)},p(c,r){r&4&&u!==(u=c[7].id+"")&&x(a,u),r&4&&h!==(h=c[7].fix+"")&&x(m,h)},d(c){c&&w(t)}}}function pe(e){let t,n,l,u,a,f,h,m,c,r,s=e[0]!==null&&z(e);return{c(){t=b("div"),n=b("div"),l=b("h1"),l.textContent="Onbrd",u=A(),a=b("label"),f=b("input"),h=g(`
      Share anonymous benchmarks`),m=A(),s&&s.c(),y(l,"class","text-base font-semibold"),y(f,"type","checkbox"),y(a,"class","text-xs flex items-center gap-1 opacity-80"),y(n,"class","flex items-center justify-between"),y(t,"class","p-4 space-y-3")},m(o,i){$(o,t,i),p(t,n),p(n,l),p(n,u),p(n,a),p(a,f),f.checked=e[3],p(a,h),p(t,m),s&&s.m(t,null),c||(r=[F(f,"change",e[5]),F(f,"change",e[4])],c=!0)},p(o,[i]){i&8&&(f.checked=o[3]),o[0]!==null?s?s.p(o,i):(s=z(o),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},i:O,o:O,d(o){o&&w(t),s&&s.d(),c=!1,S(r)}}}function me(e,t,n){let l=null,u={},a=[],f=!1;async function h(){const r=window.__ONBRD_LAST_AUDIT__;r&&n(0,l=r.score);const{onbrd_rules:s}=await chrome.storage.session.get("onbrd_rules");r&&s&&n(2,a=s.rules.filter(d=>{var _;return!((_=r.metrics)!=null&&_[d.id])}).sort((d,_)=>_.weight-d.weight).slice(0,3).map(d=>({id:d.id,fix:d.fix,weight:d.weight})));const o=await chrome.storage.session.get("onbrd_benchmark");n(1,u=o.onbrd_benchmark||{});const i=await chrome.storage.sync.get("telemetry_opt_in");n(3,f=!!i.telemetry_opt_in)}async function m(){n(3,f=!f),await chrome.storage.sync.set({telemetry_opt_in:f})}ee(h);function c(){f=this.checked,n(3,f)}return[l,u,a,f,m,c]}class ge extends ae{constructor(t){super(),ue(this,t,me,pe,Q,{})}}const ye=new ge({target:document.body});export{ye as default};
