<!DOCTYPE html>
<html>
<head>
    <title>OnboardingAudit.ai Logger Demo</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .log-entry { margin: 5px 0; padding: 5px; border-left: 3px solid #ccc; }
        .start { border-color: #007bff; background: #e7f3ff; }
        .ok { border-color: #28a745; background: #e7f9e7; }
        .error { border-color: #dc3545; background: #ffe7e7; }
        button { margin: 10px 5px; padding: 10px 15px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>OnboardingAudit.ai Logger Demo</h1>
    <p>Click the buttons below to see the logger in action:</p>
    
    <button onclick="testPopupLogger()">Test POPUP Logger</button>
    <button onclick="testBackgroundLogger()">Test BG Logger</button>
    <button onclick="testContentLogger()">Test CS Logger</button>
    <button onclick="clearLogs()">Clear Logs</button>
    
    <div id="log-output" style="margin-top: 20px;"></div>

    <script type="module">
        // Simple logger implementation for demo
        function createLogger(context) {
            const formatMessage = (level, message) => {
                const timestamp = new Date().toISOString();
                return `[OA][${context}] ${level}: ${message} (${timestamp})`;
            };

            return {
                start: (message) => {
                    const formatted = formatMessage('START', message);
                    console.log(formatted);
                    addLogEntry(formatted, 'start');
                },
                ok: (message) => {
                    const formatted = formatMessage('OK', message);
                    console.log(formatted);
                    addLogEntry(formatted, 'ok');
                },
                error: (message) => {
                    const formatted = formatMessage('ERROR', message);
                    console.error(formatted);
                    addLogEntry(formatted, 'error');
                }
            };
        }

        // Create loggers for each context
        const popupLogger = createLogger('POPUP');
        const backgroundLogger = createLogger('BG');
        const contentLogger = createLogger('CS');

        function addLogEntry(message, type) {
            const logOutput = document.getElementById('log-output');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = message;
            logOutput.appendChild(entry);
            logOutput.scrollTop = logOutput.scrollHeight;
        }

        // Make functions available globally
        window.testPopupLogger = () => {
            popupLogger.start('Initializing popup interface');
            popupLogger.ok('Popup loaded successfully');
            popupLogger.error('Failed to connect to background script');
        };

        window.testBackgroundLogger = () => {
            backgroundLogger.start('Starting audit flow');
            backgroundLogger.ok('Content script injected');
            backgroundLogger.error('Failed to inject content script');
        };

        window.testContentLogger = () => {
            contentLogger.start('Starting audit with network idle detection');
            contentLogger.ok('Network idle detected');
            contentLogger.error('Audit failed: DOM analysis error');
        };

        window.clearLogs = () => {
            document.getElementById('log-output').innerHTML = '';
        };

        // Initial demo
        console.log('=== OnboardingAudit.ai Logger Demo ===');
        popupLogger.ok('Logger demo initialized');
    </script>
</body>
</html>